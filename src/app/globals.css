@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
@import "tailwindcss";

/* Dynamic CSS Variables - These will be updated by JavaScript */
:root {
  /* Colors - Default values (will be overridden by theme config) */
  --color-primary: #E1B84B;
  --color-secondary: #B86B3A;
  --color-background: #F8F6F2;
  --color-foreground: #181818;
  --color-mustard: #E1B84B;
  --color-clay: #B86B3A;
  --color-offwhite: #F8F6F2;
  --color-black: #181818;
  
  /* RGB values for opacity control */
  --color-mustard-rgb: 225, 184, 75;
  --color-clay-rgb: 184, 107, 58;
  --color-offwhite-rgb: 248, 246, 242;
  --color-black-rgb: 24, 24, 24;
  
  /* Typography - Default values */
  --font-primary: 'EB Garamond', serif;
  --font-secondary: 'Space Mono', monospace;
  --font-sans: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-size-base: 16px;
  --font-size-scale: 1.25;
  
  /* Spacing - Default values */
  --spacing-unit: 8px;
  --spacing-scale: 1.5;
  
  /* Effects - Default values */
  --transition-speed: 0.3s;
  --border-radius: 4px;
  
  /* Legacy variables for backward compatibility */
  --background: var(--color-background);
  --foreground: var(--color-foreground);
  --mustard: var(--color-mustard);
  --clay: var(--color-clay);
  --offwhite: var(--color-offwhite);
  --black: var(--color-black);
  --font-serif: var(--font-primary);
  --font-mono: var(--font-secondary);
}

@theme inline {
  --color-background: var(--color-background);
  --color-foreground: var(--color-foreground);
  --font-sans: var(--font-sans);
  --font-mono: var(--font-secondary);
}

@media (prefers-color-scheme: dark) {
  :root {
    --color-background: #0a0a0a;
    --color-foreground: #ededed;
  }
}

body {
  background: var(--color-background);
  color: var(--color-foreground);
  font-family: var(--font-primary);
  font-size: var(--font-size-base);
  overflow-x: hidden; /* Prevent horizontal scroll during transition */
  transition: background-color var(--transition-speed) ease, color var(--transition-speed) ease;
}

/* Only hide cursor on pages with custom cursor */
body.custom-cursor-page {
  cursor: none;
}

/* Normal cursor behavior for other pages */
body:not(.custom-cursor-page) {
  cursor: auto;
}

/* Font utility classes */
.font-serif {
  font-family: var(--font-primary);
}
.font-mono {
  font-family: var(--font-secondary);
}
.font-sans {
  font-family: var(--font-sans);
}

/* Typography scale utilities */
.text-scale-1 { font-size: calc(var(--font-size-base) * var(--font-size-scale)); }
.text-scale-2 { font-size: calc(var(--font-size-base) * var(--font-size-scale) * var(--font-size-scale)); }
.text-scale-3 { font-size: calc(var(--font-size-base) * var(--font-size-scale) * var(--font-size-scale) * var(--font-size-scale)); }
.text-scale-4 { font-size: calc(var(--font-size-base) * var(--font-size-scale) * var(--font-size-scale) * var(--font-size-scale) * var(--font-size-scale)); }

/* Spacing utilities */
.space-unit-1 { margin: var(--spacing-unit); }
.space-unit-2 { margin: calc(var(--spacing-unit) * var(--spacing-scale)); }
.space-unit-3 { margin: calc(var(--spacing-unit) * var(--spacing-scale) * var(--spacing-scale)); }
.space-unit-4 { margin: calc(var(--spacing-unit) * var(--spacing-scale) * var(--spacing-scale) * var(--spacing-scale)); }

.p-space-unit-1 { padding: var(--spacing-unit); }
.p-space-unit-2 { padding: calc(var(--spacing-unit) * var(--spacing-scale)); }
.p-space-unit-3 { padding: calc(var(--spacing-unit) * var(--spacing-scale) * var(--spacing-scale)); }
.p-space-unit-4 { padding: calc(var(--spacing-unit) * var(--spacing-scale) * var(--spacing-scale) * var(--spacing-scale)); }

/* Border radius utilities */
.rounded-theme { border-radius: var(--border-radius); }
.rounded-theme-lg { border-radius: calc(var(--border-radius) * 2); }
.rounded-theme-xl { border-radius: calc(var(--border-radius) * 3); }

/* Transition utilities */
.transition-theme { transition: all var(--transition-speed) ease; }
.transition-colors-theme { transition: color var(--transition-speed) ease, background-color var(--transition-speed) ease, border-color var(--transition-speed) ease; }

.grain-overlay {
  pointer-events: none;
  position: fixed;
  inset: 0;
  background: url('/grain.png') repeat;
  opacity: 0.13;
  z-index: 2;
  mix-blend-mode: multiply;
}

.custom-cursor {
  position: fixed;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(225, 184, 75, 0.7);
  pointer-events: none;
  transition: transform var(--transition-speed), background var(--transition-speed);
  z-index: 9999;
  mix-blend-mode: multiply;
}

.custom-cursor.cursor-hover {
  transform: scale(1.4);
  background: var(--color-clay);
}

@media (max-width: 768px) {
  .custom-cursor {
    display: none !important;
  }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

.fade-in-up {
  animation: fadeInUp 1.2s cubic-bezier(0.4,0.2,0.2,1) both;
}

@keyframes retroFlicker {
  0% { opacity: 0.1; filter: blur(2px); }
  5% { opacity: 0.7; filter: blur(0.5px); }
  10% { opacity: 0.2; filter: blur(1.5px); }
  15% { opacity: 0.9; filter: blur(0px); }
  20% { opacity: 0.4; filter: blur(1px); }
  25% { opacity: 1; filter: blur(0px); }
  30% { opacity: 0.6; filter: blur(0.5px); }
  35% { opacity: 1; filter: blur(0px); }
  40% { opacity: 0.8; filter: blur(0.2px); }
  45% { opacity: 1; filter: blur(0px); }
  50% { opacity: 0.3; filter: blur(1px); }
  55% { opacity: 1; filter: blur(0px); }
  60% { opacity: 0.7; filter: blur(0.5px); }
  65% { opacity: 1; filter: blur(0px); }
  70% { opacity: 0.5; filter: blur(1px); }
  75% { opacity: 1; filter: blur(0px); }
  80% { opacity: 0.9; filter: blur(0.2px); }
  85% { opacity: 1; filter: blur(0px); }
  90% { opacity: 0.8; filter: blur(0.5px); }
  95% { opacity: 1; filter: blur(0px); }
  100% { opacity: 1; filter: blur(0px); }
}

.flicker {
  animation: retroFlicker 1.2s steps(2, end) forwards;
}

/* Header height variable with fallback */
:root {
  --header-height: 0px;
}

/* Nav slide-in animation */
.nav-slide-in {
  transform: translateX(0) !important;
}

.hidden.lg\:block:not(.nav-slide-in) {
  transform: translateX(-100%);
}

/* Page transition styles */
.page-transition {
  transition: transform var(--transition-speed) cubic-bezier(0.4, 0.2, 0.2, 1);
  will-change: transform;
}

.page-transition.sliding-left {
  transform: translateX(-100%);
}

.page-transition.sliding-right {
  transform: translateX(100%);
}

/* Ensure the yellow background is maintained during transition */
.page-transition .bg-yellow-400,
.page-transition .bg-orange-400 {
  transition: background-color var(--transition-speed) ease;
}

/* Line clamp utility */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Vinyl record vibe background for yellow section */
.vinyl-bg {
  background: 
    radial-gradient(circle at 60% 40%, rgba(255, 255, 255, 0.08) 0%, rgba(255, 255, 255, 0.01) 60%, transparent 100%),
    repeating-radial-gradient(circle at 60% 40%, rgba(0,0,0,0.07) 0px, rgba(0,0,0,0.07) 2px, transparent 2.5px, transparent 8px);
  /* The first gradient gives a subtle highlight, the second creates faint grooves */
}

.record-spin {
  transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
  display: inline-block;
}

.group:hover .spin-on-group-hover {
  transform: rotate(360deg);
}
